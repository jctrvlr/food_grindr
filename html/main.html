<!DOCTYPE html>

<html>

    <meta charset="utf-8"/>


    <script src="js/main.js"></script>

    <head>
            <link rel="stylesheet" type="text/css" href="css/main.css">
    </head>

    <body onload="submitGetRes()" >

    <div class="wrapper">
    <div class="wrapper_container">
    <!-- start content -->
        <div class="site-wrapper active" id="target">
        <div class="site-wrapper_left-col">
            <a href="#" class="logo">Food Grindr</a>
            <div class="left-nav">
               
               <a href="#"><i class="fa fa-dashboard"></i>Dashboard</a>
                <a href="#"><i class="fa fa-favorites"></i>Favorites</a>
                <a href="#"><i class="fa fa-settings"></i>Settings</a>
                <a href="#"><i class="fa fa-about"></i>About</a>
               
            </div>
        </div>
       <div class="site-wrapper_top-bar">
            <a href="#" id="toggle"><i class="fa fa-bars"></i></a>
        </div>
        
            <!-- inner content -->
            <div class="row">
                <div class="col-1">
                <div class="user-item">
                    <div class="user-item_photo">
                    <img src="http://www.clker.com/cliparts/Q/3/D/I/L/u/knife-and-fork-clipart-hi.png" alt="myphoto" />
                    </div>
                    <div class="user-item_info">
                    <p id="name" class="name">Katy's Kitchen</p>
                    <p class="sub">Front-End developer</p>
                    <div class="controls">
                    
                        <img src="unlike.png" onClick="submitResp(1)"/>
                        <img src="heart.png" onClick="submitResp(0)"/>
                        
                        <!--
                        <a href="#"><i class="fa fa-camera"></i></a>
                        <a href="#"><i class="fa fa-pencil"></i></a>
                        -->
                        
                    </div>
                    </div>
                </div>
                </div>
                <div class="col-2">
                    <div class="chat">
                        <div class="user-item_infoname">
                        <p id="name"></p>
                        </div>
                        <div class="user-item_info">
                        <!--<p id="name"></p>-->
                        <p id="rating"></p>
                        <p id="address"></p>
                        <p id="phone"></p>
                        <p id="price"></p>
                        <p id="cuisine"></p>
                        <p id="hours"></p>
                        <p id="delivery">Yes</p>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
           <!-- </div> -->
            <!-- end inner content -->
        </div>  
    <!-- end content -->
    </div>
    </div>
    </body>
    <script type="text/javascript">
        var rest;
        function submitGetRes() {
            sendGetResRequest();
            return 0;
        }

        function HandleGetResResponse(response) {
            console.log('Inside handleRequest: ' + response);
            rest = JSON.parse(response);
            console.debug(rest);
            document.getElementById("name").innerHTML=rest.name;
            document.getElementById("address").innerHTML=rest.address;
            document.getElementById("price").innerHTML=rest.price_range;
            document.getElementById("cuisine").innerHTML=rest.cuisine;
        }

        function submitResp(like) {
            var obj = JSON.parse(rest);
            var res_id = obj.res_id;
            console.log(rest);
            console.debug(obj);
            console.log(obj["res_id"]);
            sendRespRequest(res_id, like);

        }

        function sendRespRequest(res_id, like) {
            $.ajax({
                url: 'rest.php',
                data: {
                    type: 'rest_response',
                    res_id: res_id,
                    like: like,
                },
                type: 'post',
                success: function (output) {
                    HandleGetResResponse(output);
                }
            })
        }

        function sendGetResRequest() {
            console.log('Inside sendRequest');
            $.ajax({
                url: 'rest.php',
                data: {
                    type: 'get_res',
                },
                type: 'post',
                success: function (output) {
                    HandleGetResResponse(output);
                }
            });
        }

    </script>
</html>